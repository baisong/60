<html>

<head>
    <title>Day</title>
</head>

<body>
    <style>
        body {
            background-color: #f0f0f0;
        }
        #page {
            margin: 20px auto;
            width: 800px;
            border-radius: 10px;
            text-align: center;
            padding: 20px;
            background-color: white;
            min-height: 400px;
        }
        #message {
            font-size: 20px;
            font-family: Arial, helvetica, sans-serif;
            margin: 100px auto;
        }
        .week td {
            border: 1px solid black;
            height: 97px;
        }
        .week .active {
            background-color: black;
        }
        .week {
            width: 100%;
        }
    </style>
    <div id="page">
        <div id="message" data-offset="-1"></div>
    </div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            function getCountry(offset) {
    var countries = [
    'China',
    'India',
    'United States',
    'Indonesia',
    'Brazil',
    'Pakistan',
    'Nigeria',
    'Bangladesh',
    'Russia',
    'Japan',
    'Mexico',
    'Philippines',
    'Vietnam',
    'Ethiopia',
    'Egypt',
    'Germany',
    'Iran',
    'Turkey',
    'Democratic Republic of the Congo',
    'Thailand',
    'France',
    'United Kingdom',
    'Italy',
    'Burma',
    'South Africa',
    'South Korea',
    'Colombia',
    'Spain',
    'Ukraine',
    'Tanzania',
    'Kenya',
    'Argentina',
    'Algeria',
    'Poland',
    'Sudan',
    'Uganda',
    'Canada',
    'Iraq',
    'Morocco',
    'Peru',
    'Uzbekistan',
    'Saudi Arabia',
    'Malaysia',
    'Venezuela',
    'Nepal',
    'Afghanistan',
    'Yemen',
    'North Korea',
    'Ghana',
    'Mozambique',
    'Taiwan',
    'Australia',
    'Ivory Coast',
    'Syria',
    'Madagascar',
    'Angola',
    'Cameroon',
    'Sri Lanka',
    'Romania',
    'Burkina Faso'
    ];
    return countries[offset];
  }
  /**
   *
   */
  function getCharacter(offset) {
    var characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX';
    character = '-';
    if (offset < characters.length) {
      character = characters[offset];
    }
    
    return character;
  }
  
  /**
   *
   */
  function getSyllable(offset) {
    syllable = 'CVN?';
    c = 'pmtlk';
    v = ['y','e','i','a','u','o','yn','on','un','an','in','en'];
    cOffset = Math.floor(offset / 12);
    vOffset = offset % 12;
    if (cOffset < c.length && vOffset < v.length) {
      syllable = c[cOffset] + v[vOffset];
    }
    
    return syllable;
  }
  
  /**
   *
   */
  function getColor(offset) {
		var step = 1.0000 / 60;
	  var hue = offset * step;
	  var rgb = hsvToRgb(hue,1,1);
	  var color = 'rgb(' + rgb.join(',') + ')';
	  
	  return color;
  }
  
  /**
	 * Converts an HSV color value to RGB. Conversion formula
	 * adapted from http://en.wikipedia.org/wiki/HSV_color_space.
	 * Assumes h, s, and v are contained in the set [0, 1] and
	 * returns r, g, and b in the set [0, 255].
	 *
	 * @param   Number  h       The hue
	 * @param   Number  s       The saturation
	 * @param   Number  v       The value
	 * @return  Array           The RGB representation
	 *
	 * @see https://gist.github.com/mjijackson/5311256
	 */
	function hsvToRgb(h, s, v) {
		var r, g, b;
	 
		var i = Math.floor(h * 6);
		var f = h * 6 - i;
		var p = v * (1 - s);
		var q = v * (1 - f * s);
		var t = v * (1 - (1 - f) * s);
	 
		switch (i % 6) {
		  case 0: r = v, g = t, b = p; break;
		  case 1: r = q, g = v, b = p; break;
		  case 2: r = p, g = v, b = t; break;
		  case 3: r = p, g = q, b = v; break;
		  case 4: r = t, g = p, b = v; break;
		  case 5: r = v, g = p, b = q; break;
		}
	 
		return [ Math.round(r * 255), Math.round(g * 255), Math.round(b * 255) ];
	}
	function getBinary(offset) {
	    var ret = '';
	    for (var i = 7; i > -1; i--) {
	        var d = Math.pow(2, i);
	        if (offset >= d) {
	            offset = offset - d;
	            ret = ret + '1';
	        }
	        else {
	            ret = ret + '0';
	        }
	        if (i == 4) {
	            ret = ret + ' ';
	        }
	    }
	    
	    return ret;
	}
	
	function getHex(o) {
		return '(hex)'
	}
            var getThings = function() {
                var things = [];
                // Weekday diagram
                var today = new Date();
                var weekday = (today.getDay() + 6) % 7;
                var html = '<table class="week"><tr>';
                for (var i = 0; i < 7; i++) {
                    if (i == weekday) {
                        html += '<td class="active"></td>';
                        continue;
                    }
                    html += '<td></td>';
                }
                html += '</td></tr></table>'
                things.push(html);
                // Day of the week
                var weekdays = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                things.push(html + '<br/>' + weekdays[weekday]);
                // DOW + Date
                var month = today.getMonth();
                var year = today.getFullYear();

                function nth(d) {
                    if (d > 3 && d < 21) return 'th';
                    switch (d % 10) {
                        case 1:
                            return "st";
                        case 2:
                            return "nd";
                        case 3:
                            return "rd";
                        default:
                            return "th";
                    }
                }
                var date = today.getDate();
                var months = ["January", "February", "March",
                    "April", "May", "June", "July", "August", "September",
                    "October", "November", "December"
                ];
                things.push(html + '<br/>' + weekdays[weekday] + "<br/>" + months[month] + " " + date + nth(date) + ", " + year);
                // TODO Season diagram
                // Short weekdate notation
                // Long weekdate notation
                // Char
                var sixtyEpoch = new Date("December 27, 2014 00:00:00");
                function getSixtyWeekday(date) {
                    return Math.floor(parseInt(today.getTime() - sixtyEpoch.getTime()) / (1000* 60 * 60 * 24)) % 60;
                }
                var sixtyWeekday = getSixtyWeekday(date);
                /* test -- should be 1
                var today = new Date('December 28, 2014 00:00:00');
                console.log(today);
                console.log(sixtyWeekday(today));
                // test -- should be 0
                var today = new Date('February 25, 2015 00:00:00');
                console.log(today);
                console.log(sixtyWeekday(today));
                // test -- should be 59
                var today = new Date('April 25, 2015 00:00:00');
                console.log(today);
                console.log(sixtyWeekday(today)); */

                things.push(getCharacter(sixtyWeekday));
                // Char + Syllable
                things.push(getCharacter(sixtyWeekday) + "<br/>" + getSyllable(sixtyWeekday))
                // Syllable + decimal notation + ...
                // @TODO chinese full number name
                things.push(getSyllable(sixtyWeekday) + "<br/>" + sixtyWeekday);
                // Syllable + binary notation + hex notation
                things.push(getSyllable(sixtyWeekday) + "<br/>" + getBinary(sixtyWeekday));
                // ... + hex
                things.push(getSyllable(sixtyWeekday) + "<br/>" + getBinary(sixtyWeekday) + "<br/>" + getHex(sixtyWeekday));
                // Nth largest country?
                var ord = '';
                if (sixtyWeekday > 0) {
                	ord = (sixtyWeekday + 1) + nth(sixtyWeekday + 1);
                }
                things.push(ord + " largest country?");
                // {country}
                things.push(ord + " largest country:<br/>" + getCountry(sixtyWeekday));

                return things;
            }
            $("#message").html("ready");
            $('body').keyup(function(e) {
                if (e.keyCode == 32) {
                    var things = getThings();
                    var $m = $('#message');
                    var offset = parseInt($m.data('offset')) + 1;
                    if ((offset < things.length) && (things[offset].length > 0)) {
                        $m.html(things[offset]);
                        $m.data('offset', offset);
                    } else {
                        $m.text('all set!');
                    }
                }
            });
        });
    </script>
</body>

</html>
